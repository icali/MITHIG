\section{Introduction}
\label{sec:intro}

Relativistic heavy ion collisions allow experimental studies of the quark-gluon plasma (QGP), the equilibrated high-temperature state of deconfined quarks and gluons. At the Large Hadron Collider (LHC), the abundant production of hard probes such as vector bosons, heavy quarks, jets, and quarkonia produced in the highest energy heavy ion collisions has opened a new era in the characterization of QGP, providing new information on initial state properties, parton energy loss and color screening. The capabilities of the Compact Muon Solenoid (CMS) detector in the detection of high momentum photons, electrons, muons, charged particles, and jets have proven to be a unique match for the opportunities at the LHC. A key aspect of this success has been the convergence of detector needs for precision measurements in p-p discovery physics in a high luminosity, high pileup environment and for QGP studies in high multiplicity Pb-Pb collisions. This convergence has allowed CMS to adapt a large number of new analysis techniques to studies of heavy ion collisions, such as particle-flow jet reconstruction, studies of jet substructures, lifetime fits for secondary $J/\psi$ studies,  b- and c-tagging of jets, missing \pt measurements of W production and energy flow in dijet events. 

The full power of these and other techniques will be exploited in future heavy ion studies beginning in 2018 and Run III, when an increase in the collision energy to $\sqrt{s_{_{NN}}} = 5.02$~TeV and an eventual increase in Pb-Pb collision rate to as high as $\sim 30-50$~kHz will enhance the production rate of hard probes by more than an order of magnitude. In this high energy and high luminosity era, CMS will undertake precision studies of complex observables such as $\gamma$-, Z$^0$- and W$^\pm$-jet correlations, heavy flavor jet quenching, multi-jet correlations and the azimuthal anisotropy of high \pt\ jets and quarkonia. Recently, extensive studies of fully reconstructed heavy flavor mesons such as $D^0$ and $B^+$ in heavy ion collisions also show that CMS is ideally suited for the studies of heavy flavor production and heavy quark energy loss in the quark-gluon plasma.

The CMS trigger and data acquisition system is the key to achieving the ultimate high \pt\ physics reach in heavy ion collisions. Uniquely, the CMS trigger system only has two main components, the hardware-based Level-1 (L1) trigger and the High-Level Trigger (HLT), which is implemented as ``offline'' algorithms running on a large computer farm with access to the full event information.  
The conceptual aspects of applying this system to heavy ion collisions, which are characterized by a much lower rate but a much higher multiplicity than those encountered in p-p collisions, were first developed by the US CMS HI group (see, e.g.\ \cite{Roland:2007is}). The HLT trigger work formed the basis for our previous proposals to the DOE Office of Nuclear Physics. As we demonstrated in those proposals, triggering on high \pt\ probes for Pb-Pb collision rates up to several kHz (i.e.\ the design value for Pb-Pb) is possible using event rejection solely or mostly at the HLT level. In the 2011 Pb-Pb run, this allowed a reduction of the event rate to storage by more than an order of magnitude compared to the collision rate, without prescaling the most interesting high \pt\ observables. In the 2015 Pb-Pb run, the heavy flavor meson trigger developed by the US CMS HI group from a previous DOE proposal was deployed for the first time. Those triggers increased the high \pt\ $D^0$ meson statistics for example in p-p (Pb-Pb) collisions by a factor of 600 (20), opening a new era for the precision heavy flavor physics in heavy ion collisions.

It has now become clear that the LHC will be able to significantly exceed the Pb-Pb design luminosity in future runs, possibly reaching up to 50~kHz already in Run III. This will place an even greater emphasis on the CMS trigger and DAQ system. The CMS during Pb-Pb collisions is being operated close to its hardware limit in terms of readout rate (see Sec.~\ref{sec:HWUpgrade} for details). As a consequence, CMS will not be able to benefit from the increased luminosity without a dedicated upgrade. 
In 2017, a new 4-layer pixel detector will be installed in CMS that will greatly improve the impact parameter resolution of the charged tracks. This is a unique opportunity to combine the capability of CMS for the studies of high \pt\ probes with the heavy flavor program down to \pt$\sim 0$, complementary to the physics goal of the major ALICE upgrade foreseen for Run III. Moreover, a stage-2 upgrade of the Level-1 trigger system will be commissioned for Pb-Pb data-taking. This requires improvement in the front-end detector readout bandwidth in Pb-Pb collisions, as well as significant development on the trigger strategy for data-taking in 2018 and beyond, such that CMS could provide unbiased single track, heavy flavor meson, jet triggers that are critical for the CMS physics program, and at the same time record a large statistics Minimum-Bias triggered sample that could be used for studies of low \pt\ heavy flavor mesons. This necessitates the development of underlying event background subtraction for the stage-2 L1 trigger system and improvements in the detector readout to increase the maximum L1 trigger accept rate during the Pb-Pb data-taking period.

In this proposal, we will present the CMS L1 rate upgrade design and demonstrate that the planned upgrade delivers the needed capability to record heavy flavor mesons and jets over a very wide kinematic range at the full delivered rate in high luminosity Pb-Pb runs in 2018 and beyond. This new system will need to be commissioned in 2017-2018 before the next heavy-ion running period at the end of 2018, to make successful Pb-Pb data-taking possible. Section~\ref{sec:physics} describes the expected performance of the upgraded trigger for several examples of critical measurements, compared to the limitations of the current system. The technical details of the proposed upgrade project are described in Sections~\ref{subsec:SiTracker} and~\ref{subsec:ECAL}. The support projects needed to guarantee an efficient L1 rate increase are described in Sections~\ref{subsec:SiPixel},~\ref{subsec:L1Trigger} and~\ref{subsec:dataflow}. Finally, the proposed schedule, management plan, and the budget are described in Sections~\ref{sec:management} and~\ref{sec:funding}.

